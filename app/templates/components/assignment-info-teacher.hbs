<div class="info-flex-item assignment-name">
  {{#if this.isEditing}}
    <Input @type="text" @value={{this.assignmentName}} />
  {{else}}
    {{this.assignment.name}}
  {{/if}}
</div>
<div class="info-flex-item creation-details">
  by
  <LinkTo @route="users.user" @model={{this.assignment.createdBy.id}}>
    {{this.assignment.createdBy.username}}
  </LinkTo>
  on
  {{format-date this.assignment.createDate "Do MMM YYYY"}}
</div>
<div class="info-flex-item single-line assigned-date">
  <p class="label">
    Assigned
  </p>
  {{#if this.showAssignedDateInput}}
    <Input @name="daterange" @id="assignedDate" @type="date" @value={{this.assignedDateEditVal}} />
  {{else}}
    <p class="value">
      {{format-date this.assignment.assignedDate "Do MMM YYYY"}}
    </p>
  {{/if}}
</div>
<div class="info-flex-item single-line due-date">
  <p class="label">
    Due
  </p>
  {{#if this.showDueDateInput}}
    <Input @id="dueDate" @name="daterange" @type="date" @value={{this.dueDateEditVal}} />
  {{else}}
    <p class="value">
      {{format-date this.assignment.dueDate "Do MMM YYYY"}}
    </p>
  {{/if}}
</div>
<div class="info-flex-item section">
  <p class="label">
    Class
  </p>
  {{#if this.showSectionInput}}
    <SelectizeInput @inputId="assn-new-section-select" @initialOptions={{this.sectionOptions}} @initialItems={{this.initialSectionItem}} @onItemAdd={{action "updateSelectizeSingle"}} @onItemRemove={{action "updateSelectizeSingle"}} @maxItems={{1}} @labelField="name" @valueField="id" @searchField="name" @propToUpdate="selectedSection" @placeholder="Search for a section by name" @model="section" @store={{this.store}} />
  {{else}}
    <LinkTo @route="sections.section" @model={{this.section.id}}>
      {{this.section.name}}
    </LinkTo>
  {{/if}}
</div>
<div class="info-flex-item problem">
  <p class="label">
    Problem
  </p>
  {{#if this.showProblemInput}}
    <SelectizeInput @store={{this.store}} @inputId="assn-new-problem-select" @initialOptions={{this.problemOptions}} @initialItems={{this.initialProblemItem}} @onItemAdd={{action "updateSelectizeSingle"}} @onItemRemove={{action "updateSelectizeSingle"}} @maxItems={{1}} @labelField="title" @valueField="id" @searchField="title" @propToUpdate="selectedProblem" @placeholder="Search for a problem by title" @isAsync={{true}} @model="problem" @queryParamsKey="query" @searchCriterion="title" @topLevelQueryParams="searchBy" @preload={{this.problemsPreloadValue}} />
  {{else}}
    <LinkTo @route="problem" @model={{this.problem}}>
      {{this.problem.title}}
    </LinkTo>
  {{/if}}
</div>
<div class="info-flex-item linked-ws">
  <p class="label">
    Linked Workspaces
    <i
      class={{this.displayListsOptions.linkedWs.icon}}
      {{action "toggleProperty" "areLinkedWsExpanded"}}
    ></i>
  </p>
  {{#if this.hasLinkedWorkspaces}}
    <ul class={{if this.areLinkedWsHidden "hidden"}}>
      {{#each this.linkedWorkspaces as |ws|}}
        <li>
          <LinkTo @route="workspace.work" @model={{ws.id}}>
            {{ws.name}}
          </LinkTo>
        </li>
      {{else}}

      {{/each}}
    </ul>
  {{else}}
    <p class="value no-linked-ws">
      N/A
    </p>
  {{/if}}
    {{#if this.showLinkedWsForm}}
      <LinkedWorkspacesNew @students={{this.studentsWithoutWorkspaces}} @assignment={{this.assignment}} @section={{this.section}} @problem={{this.problem}} @onCancel={{action (mut showLinkedWsForm) false}} @store={{this.store}} @handleResults={{action "handleCreatedLinkedWs"}} />
    {{/if}}
    {{#if this.showAddLinkedWsBtn}}
      <button
        data-test="add-linked-ws"
        class="primary-button"
        {{action (mut showLinkedWsForm) true}}
      >
        Add Linked
        Workspaces
      </button>
    {{/if}}
    {{#if this.showFullLinkedWsMsg}}
      <p class="info" data-test="info-full-linked-ws">All students are already owner of a linked workspace</p>
    {{/if}}
</div>
<div class="info-flex-item parent-ws">
  <p class="label">
    Parent Workspace
  </p>
  {{#if this.parentWorkspace}}
    <LinkTo @route="workspace.work" @model={{this.parentWorkspace.id}}>
      {{this.parentWorkspace.name}}
    </LinkTo>
  {{else}}
    <p class="value no-parent-ws">
      N/A
    </p>
  {{/if}}
  {{#if this.showParentWsForm}}
    <ParentWorkspaceNew @childWorkspaces={{this.assignment.linkedWorkspaces}} @assignment={{this.assignment}} @section={{this.section}} @problem={{this.problem}} @onCancel={{action (mut showParentWsForm) false}} @store={{this.store}} @handleResults={{action "handleCreatedParentWs"}} />
  {{/if}}
  {{#if this.showAddParentWsBtn}}
    <button data-test="add-parent-ws" class="primary-button" {{action (mut showParentWsForm) true}}>Add Parent
      Workspace</button>
  {{/if}}
  {{#if this.showNoParentWsMsg}}
    <p class="info" data-test="info-no-parent-ws">You must first add linked workspaces in order to add a parent workspace</p>
  {{/if}}

</div>
<div class="info-flex-item submissions">
  <p class="label">
    Submissions
    <i
      class={{this.displayListsOptions.submissions.icon}}
      {{action "toggleProperty" "areSubmissionsExpanded"}}
    ></i>
  </p>
  <AssignmentReport @details={{this.assignment.reportDetails}} @assignment={{this.assignment}} @students={{this.studentList}} @hidden={{this.areSubmissionsHidden}} />
</div>
<div class="info-flex-item actions">
  {{#if this.showEditButton}}
    <button
      data-test="edit-assignment"
      class="primary-button"
      {{action "editAssignment"}}
    >
      Edit
    </button>
  {{/if}}
  {{#if this.isEditing}}
    <button class="primary-button" data-test="assn-save" {{action "updateAssignment"}}>
      Save
    </button>
    <button class="primary-button cancel-button" data-test="assn-cancel" {{action "stopEditing"}}>
      Cancel
    </button>
    <button data-test="trash-assn" class="right" {{action "showDeleteModal"}}>
      <i class="fa fa-trash" aria-hidden="true"></i>
    </button>
  {{/if}}
</div>
<div class="info-flex-item errors">
 {{#each this.findRecordErrors as |error|}}
    <p class="error-message">{{error}}</p>
  {{/each}}
  {{#each this.updateRecordErrors as |error|}}
    <p class="error-message">{{error}}</p>
  {{/each}}
  {{#each this.dataFetchErrors as |error|}}
    <p class="error-message">{{error}}</p>
  {{/each}}
  {{#if this.isMissingRequiredFields}}
    <p class="error-message">Please provide all required fields.</p>
  {{/if}}
  {{#if this.invalidDateRange}}
    <p class="error-message">Invalid Date Range</p>
  {{/if}}
</div>
